<div>
  <div class="absolute top-4 right-4 z-50" (click)="toggleOptions()">
    <app-settings-icon></app-settings-icon>
  </div>

  @if(showOptions()){

  <div class="absolute right-4 top-4 bg-white p-4 rounded shadow-lg z-40 min-h-40 w-full max-w-2/3">
    <h2 class="text-xl font-bold uppercase mb-3">Opciones</h2>

    <div class="mb-5 font-bold">
      <label class="block mb-2">Calibrar volumen mÃ¡ximo:</label>
      @if(isCalibrating()){
      <p class="text-green-500">Calibrando...</p>
      }@else{
      <p class="text-red-500">Presiona el botÃ³n para calibrar</p>
      }
      <button class="bg-blue-500 text-white p-2 rounded" (click)="handleCalibrate()">Calibrar</button>
    </div>

    <div class="mb-5 font-bold">
      <label class="block mb-2">Dificultad: {{difficulty()}}x</label>
      <input class="w-full" type="range" min="1" max="2" step="0.1" [(ngModel)]="difficulty"
        (change)="hasWon.set(false)" />
    </div>

    <div>
      <label class="mb-5 font-bold">Stats</label>
      <p>Volumen actual: {{currentVolume().toFixed(3)}}</p>
      <p>Volumen mÃ¡ximo calibrado: {{maxVolume().toFixed(3)}}</p>
      <p>Umbral para ganar: {{(maxVolume() * difficulty()).toFixed(3)}}</p>
    </div>
  </div>}


  <h1 class="text-center text-4xl uppercase font-bold mt-10 mb-10">Marlomentro</h1>

  <div class="flex flex-col items-center">
    <div class="max-w-10 w-full h-[50vh] bg-gray-300 rounded-2xl overflow-hidden relative">
      <div class="w-full bg-red-600 transition duration-1000 bottom-0 absolute" [style.height]="getBarHeight()"></div>

    </div>
  </div>

  @if(hasWon()){

  <div>
    <h2 style="color: green">ðŸŽ‰ Â¡Ganaste! ðŸŽ‰</h2>
  </div>
  }
</div>